---
layout: base.njk
bodyClass: theme-wikipedia
---
<section class="app-window window-wikipedia">
  <header class="window-bar">
    <div class="window-dots">
      <span class="dot dot-red"></span>
      <span class="dot dot-yellow"></span>
      <span class="dot dot-green"></span>
    </div>
    <div class="window-title">{{ title or "About" }}</div>
    <div class="window-meta">Wikipedia</div>
  </header>
  <div class="window-body">
    <div class="wiki-shell">
      <aside class="wiki-sidebar">
        <div class="wiki-logo">W</div>
        <div class="wiki-toc-title">Contents</div>
        <nav class="wiki-nav" id="wiki-toc">
          <!-- TOC will be generated by JavaScript -->
        </nav>
      </aside>
      <article class="wiki-article">
        {{ content | safe }}
      </article>
    </div>
  </div>
</section>
<script>
  // Generate table of contents dynamically from headings
  (function() {
    const article = document.querySelector('.wiki-article');
    const toc = document.getElementById('wiki-toc');
    if (!article || !toc) return;
    
    const headings = article.querySelectorAll('h2');
    const usedIds = new Set();
    
    headings.forEach((heading, index) => {
      // Generate ID if it doesn't exist
      if (!heading.id) {
        const headingText = heading.textContent.trim();
        let baseId = headingText.toLowerCase().replace(/[^\w\s-]/g, '').replace(/\s+/g, '-');
        
        // Ensure uniqueness by appending index if needed
        let finalId = baseId;
        let counter = 1;
        while (usedIds.has(finalId)) {
          finalId = baseId + '-' + counter;
          counter++;
        }
        
        heading.id = finalId;
        usedIds.add(finalId);
      } else {
        usedIds.add(heading.id);
      }
      
      const link = document.createElement('a');
      link.href = '#' + heading.id;
      link.textContent = heading.textContent;
      toc.appendChild(link);
    });
  })();
</script>
